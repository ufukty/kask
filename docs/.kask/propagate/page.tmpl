{{define "sitemap-item-helper"}}
{{if ne .Href ""}}<a href="{{trustedHtml .Href}}">{{trustedHtml .Title}}</a>
{{else}}<span>{{trustedHtml .Title}}</span>
{{end}}
{{with .Children}}
<ul>
  {{range .}}
  <li>{{if ne .Href "/404"}}{{template "sitemap-item-helper" .}}{{end}}</li>
  {{end}}
</ul>
{{end}}
{{end}}

{{define "sitemap-item"}}
<ul>
  <li>{{template "sitemap-item-helper" .}}</li>
</ul>
{{end}}

{{define "toc-item-helper"}}
<a href="#{{trustedHtml .ID}}" class="toc{{.Level}}">{{trustedHtml .Title}}</a>
{{with .Children}}
<ul>
  {{range .}}
  <li>{{template "toc-item-helper" .}}</li>
  {{end}}
</ul>
{{end}}
{{end}}

{{define "toc-item"}}
<ul>
  <li>{{template "toc-item-helper" .}}</li>
</ul>
{{end}}

{{define "page"}}
<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Node.Title}} — Kask Docs</title>

    <link rel="icon" type="image/png" sizes="16x16" href="/.assets/favicon@1x.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/.assets/favicon@2x.png">
    <link rel="icon" type="image/png" sizes="48x48" href="/.assets/favicon@3x.png">
    <link rel="icon" type="image/png" sizes="64x64" href="/.assets/favicon@4x.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/.assets/touch-icon@120w.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/.assets/touch-icon@180w.png">

    <meta name="title" content="{{.Node.Title}} — Kask Docs">
    <meta name="description" content="Discover the Kask documentation, the site compiler enabling seamless writer-developer collaboration.">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kask.pages.dev">
    <meta property="og:title" content="{{.Node.Title}} — Kask Docs">
    <meta property="og:description" content="Discover the Kask documentation, the site compiler enabling seamless writer-developer collaboration.">
    <meta property="og:image" content="https://kask.pages.dev/.assets/card-og.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://kask.pages.dev">
    <meta name="twitter:title" content="{{.Node.Title}} — Kask Docs">
    <meta name="twitter:description" content="Discover the Kask documentation, the site compiler enabling seamless writer-developer collaboration.">
    <meta name="twitter:image" content="https://kask.pages.dev/.assets/card-twitter.png">

    {{range .Stylesheets}}
    <link rel="stylesheet" href="{{.}}">{{end}}

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
  </head>

  <body>

    <header>
      <button id="sitemap-button" onclick="toggleSitemap()">
        <svg class="header-icon" width="23px" height="18px" viewBox="0 0 23 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <rect x="0" y="0" width="23" height="2" rx="1"></rect>
          <rect x="0" y="8" width="23" height="2" rx="1"></rect>
          <rect x="0" y="16" width="23" height="2" rx="1"></rect>
        </svg>
      </button>

      <a href="/" id="logotype"><img src="/.assets/home.png" srcset="/.assets/home@2x.png 2x, /.assets/home@3x.png 3x"><span>Kask</span></a>

      {{with .Markdown}}{{with .Toc}}
      <button id="toc-button" onclick="toggleToc()">
        <svg class="header-icon" width="27px" height="20px" viewBox="0 0 27 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <rect x="0" y="0" width="4" height="4" rx="2"></rect>
          <rect x="0" y="8" width="4" height="4" rx="2"></rect>
          <rect x="0" y="16" width="4" height="4" rx="2"></rect>
          <rect x="9" y="1" width="18" height="2" rx="1"></rect>
          <rect x="9" y="9" width="18" height="2" rx="1"></rect>
          <rect x="9" y="17" width="18" height="2" rx="1"></rect>
        </svg>
      </button>
      {{end}}{{end}}
    </header>

    <div id="navs">
      <nav id="sitemap">
        <div class="nav-header">Sitemap</div>
        {{template "sitemap-item" .Root}}
        <div class="nav-header">Links</div>
        <div id="link-grid">
          <a target="_blank" href="https://github.com/ufukty/kask">
            <svg class="github-logo" viewBox="0 0 96 98" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"></path>
            </svg>
            <span>Repository</span>
          </a>
          <a target="_blank" href="https://github.com/ufukty/kask/commits">
            <svg class="github-logo" viewBox="0 0 98 98" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"></path>
            </svg>
            <span>Commits</span>
          </a>
          <a target="_blank" href="https://github.com/ufukty/kask/issues">
            <svg class="github-logo" viewBox="0 0 98 98" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"></path>
            </svg>
            <span>Issues</span>
          </a>
          <a target="_blank" href="https://github.com/ufukty/kask/pulls">
            <svg class="github-logo" viewBox="0 0 98 98" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"></path>
            </svg>
            <span>PRs</span>
          </a>
        </div>
      </nav>
      {{with .Markdown}}{{with .Toc}}
      <nav id="toc">
        <div class="nav-header">In this page</div>
        {{template "toc-item" (index .Children 0)}}
      </nav>
      {{end}}{{end}}

    </div>

    <script>
      var navs = document.getElementById("navs")
      var toc = document.getElementById("toc")
      var sitemap = document.getElementById("sitemap")
      /** @type {HTMLDivElement} */
      var onSpot = undefined
      /** @param {HTMLDivElement} elem */
      function toggleNavsFor(elem) {
        if (onSpot === elem) {
          onSpot.classList.remove("on-spot")
          navs.classList.remove("open");
          onSpot = undefined
        } else if (onSpot !== undefined) {
          navs.style.scrollBehavior = "smooth"
          navs.scrollLeft = elem.offsetLeft
          elem.scrollTop = 0
          elem.classList.add("on-spot")
          onSpot.classList.remove("on-spot")
          onSpot = elem
        } else {
          navs.classList.add("open")
          navs.style.scrollBehavior = "none"
          navs.scrollLeft = elem.offsetLeft
          elem.scrollTop = 0
          elem.classList.add("on-spot")
          onSpot = elem
        }
      }

      function toggleSitemap() {
        toggleNavsFor(sitemap)
      }
      function toggleToc() {
        toggleNavsFor(toc)
      }
    </script>

    <main class="markdown">
      {{template "page-content" .}}
    </main>

  </body>

</html>
{{end}}

{{define "page-content"}}
{{trustedHtml .Markdown.Content}}
{{end}}

{{define "markdown-page"}}{{template "page" .}}{{end}}